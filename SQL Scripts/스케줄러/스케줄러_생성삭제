-- 참조를 위한 임시 멤버 테이블 생성
DROP TABLE MEMBER CASCADE CONSTRAINTS;

CREATE TABLE MEMBER (
    NO   NUMBER NOT NULL PRIMARY KEY,
    NAME VARCHAR2(30 BYTE) NOT NULL
    );

-- 스케줄러 테이블 생성
DROP TABLE "SCHEDULER" CASCADE CONSTRAINTS;

CREATE TABLE "SCHEDULER" (
	"NO"	NUMBER		NOT NULL,
	"MEMBER_NO"	NUMBER		NOT NULL,
	"VISABLE"	VARCHAR2(4 BYTE)	DEFAULT 'Y'	NOT NULL,
	"CREATE_DATE"	DATE	DEFAULT SYSDATE	NOT NULL,
	"EDIT_DATE"	DATE		NULL
);

COMMENT ON COLUMN "SCHEDULER"."NO" IS '번호';

COMMENT ON COLUMN "SCHEDULER"."MEMBER_NO" IS '작성자번호';

COMMENT ON COLUMN "SCHEDULER"."VISABLE" IS '공개상태여부';

COMMENT ON COLUMN "SCHEDULER"."CREATE_DATE" IS '생성일자';

COMMENT ON COLUMN "SCHEDULER"."EDIT_DATE" IS '최종수정일자';

ALTER TABLE "SCHEDULER" ADD CONSTRAINT "PK_SCHEDULER" PRIMARY KEY (
	"NO"
);

ALTER TABLE "SCHEDULER" ADD CONSTRAINT "FK_MEM_TO_SCHE.MEMBER_NO" FOREIGN KEY (
	"MEMBER_NO"
)
REFERENCES "MEMBER" (
	"NO"
);

-- 스케줄러 요소 테이블 생성
DROP TABLE "SCHEDULER_COMPONENT" CASCADE CONSTRAINTS;

CREATE TABLE "SCHEDULER_COMPONENT" (
	"CODE"	VARCHAR2(10)		NOT NULL,
	"TYPE"	VARCHAR2(20)		NOT NULL
);

COMMENT ON COLUMN "SCHEDULER_COMPONENT"."CODE" IS '코드';

COMMENT ON COLUMN "SCHEDULER_COMPONENT"."TYPE" IS '종류명';

ALTER TABLE "SCHEDULER_COMPONENT" ADD CONSTRAINT "PK_SCHEDULER_COMPONENT" PRIMARY KEY (
	"CODE"
);

-- 스케줄러 사진 테이블 생성
DROP TABLE "SCHEDULER_IMAGE" CASCADE CONSTRAINTS;

CREATE TABLE "SCHEDULER_IMAGE" (
	"NO"	NUMBER		NOT NULL,
	"ORIGINAL_FILENAME"	VARCHAR2(200)		NOT NULL,
	"RENAMED_FILENAME"	VARCHAR2(200)		NOT NULL,
	"CREATE_DATE"	DATE	DEFAULT SYSDATE	NOT NULL
);

COMMENT ON COLUMN "SCHEDULER_IMAGE"."NO" IS '번호';

COMMENT ON COLUMN "SCHEDULER_IMAGE"."ORIGINAL_FILENAME" IS '등록파일명';

COMMENT ON COLUMN "SCHEDULER_IMAGE"."RENAMED_FILENAME" IS '수정파일명';

COMMENT ON COLUMN "SCHEDULER_IMAGE"."CREATE_DATE" IS '생성일자';

ALTER TABLE "SCHEDULER_IMAGE" ADD CONSTRAINT "PK_SCHEDULER_IMAGE" PRIMARY KEY (
	"NO"
);

-- 스케줄러_승차권 테이블 생성
DROP TABLE "SCHEDULER_TICKET" CASCADE CONSTRAINTS;

CREATE TABLE "SCHEDULER_TICKET" (
	"NO"	NUMBER		NOT NULL,
	"SCHEDULER_NO"	NUMBER		NOT NULL,
	"CODE"	VARCHAR2(10)		NOT NULL,
	"DEP_TIME"	VARCHAR2(50)		NOT NULL,
	"ARR_TIME"	VARCHAR2(50)		NOT NULL,
	"DEP_STATION"	VARCHAR2(50)		NOT NULL,
	"ARR_STATION"	VARCHAR2(50)		NOT NULL,
	"PEOPLE_COUNT"	VARCHAR2(70)		NULL,
	"COST"	NUMBER		NULL
);

COMMENT ON COLUMN "SCHEDULER_TICKET"."NO" IS '번호';

COMMENT ON COLUMN "SCHEDULER_TICKET"."SCHEDULER_NO" IS '번호';

COMMENT ON COLUMN "SCHEDULER_TICKET"."CODE" IS '종류코드';

COMMENT ON COLUMN "SCHEDULER_TICKET"."DEP_TIME" IS '출발시간';

COMMENT ON COLUMN "SCHEDULER_TICKET"."ARR_TIME" IS '도착시간';

COMMENT ON COLUMN "SCHEDULER_TICKET"."DEP_STATION" IS '출발역';

COMMENT ON COLUMN "SCHEDULER_TICKET"."ARR_STATION" IS '도착역';

COMMENT ON COLUMN "SCHEDULER_TICKET"."PEOPLE_COUNT" IS '인원정보';

COMMENT ON COLUMN "SCHEDULER_TICKET"."COST" IS '비용';

ALTER TABLE "SCHEDULER_TICKET" ADD CONSTRAINT "PK_SCHEDULER_TICKET" PRIMARY KEY (
	"NO"
);

ALTER TABLE "SCHEDULER_TICKET" ADD CONSTRAINT "FK_SC_TO_SCTICKET.SCHEDULER_NO" FOREIGN KEY (
	"SCHEDULER_NO"
)
REFERENCES "SCHEDULER" (
	"NO"
);

ALTER TABLE "SCHEDULER_TICKET" ADD CONSTRAINT "FK_SCCOMPO_TO_SCTICKET.CODE" FOREIGN KEY (
	"CODE"
)
REFERENCES "SCHEDULER_COMPONENT" (
	"CODE"
);

-- 스케줄러 일정 테이블 생성
DROP TABLE "SCHEDULER_EVENT" CASCADE CONSTRAINTS;

CREATE TABLE "SCHEDULER_EVENT" (
	"NO"	NUMBER		NOT NULL,
	"SCHEDULER_NO"	NUMBER		NOT NULL,
	"CODE"	VARCHAR2(10)		NOT NULL,
	"IMAGE_NO"	NUMBER		NULL,
	"TITLE"	VARCHAR2(100)		NOT NULL,
	"START_TIME"	VARCHAR2(50)		NOT NULL,
	"END_TIME"	VARCHAR2(50)		NOT NULL,
	"LOCATION"	VARCHAR2(200)		NOT NULL,
	"COST"	NUMBER		NULL,
	"DETAIL"	VARCHAR2(1000)		NULL
);

COMMENT ON COLUMN "SCHEDULER_EVENT"."NO" IS '번호';

COMMENT ON COLUMN "SCHEDULER_EVENT"."SCHEDULER_NO" IS '스케줄러번호';

COMMENT ON COLUMN "SCHEDULER_EVENT"."CODE" IS '종류코드';

COMMENT ON COLUMN "SCHEDULER_EVENT"."IMAGE_NO" IS '사진번호';

COMMENT ON COLUMN "SCHEDULER_EVENT"."TITLE" IS '일정명';

COMMENT ON COLUMN "SCHEDULER_EVENT"."START_TIME" IS '시작시간';

COMMENT ON COLUMN "SCHEDULER_EVENT"."END_TIME" IS '종료시간';

COMMENT ON COLUMN "SCHEDULER_EVENT"."LOCATION" IS '위치';

COMMENT ON COLUMN "SCHEDULER_EVENT"."COST" IS '비용';

COMMENT ON COLUMN "SCHEDULER_EVENT"."DETAIL" IS '일정세부내용';

ALTER TABLE "SCHEDULER_EVENT" ADD CONSTRAINT "PK_SCHEDULER_EVENT" PRIMARY KEY (
	"NO"
);

ALTER TABLE "SCHEDULER_EVENT" ADD CONSTRAINT "FK_SC_TO_SCEVENT.SCHEDULER_NO" FOREIGN KEY (
	"SCHEDULER_NO"
)
REFERENCES "SCHEDULER" (
	"NO"
);

ALTER TABLE "SCHEDULER_EVENT" ADD CONSTRAINT "FK_SCCOMPO_TO_SCEVENT.CODE" FOREIGN KEY (
	"CODE"
)
REFERENCES "SCHEDULER_COMPONENT" (
	"CODE"
);

ALTER TABLE "SCHEDULER_EVENT" ADD CONSTRAINT "FK_SCIMAGE_TO_SCEVENT.IMAGE_NO" FOREIGN KEY (
	"IMAGE_NO"
)
REFERENCES "SCHEDULER_IMAGE" (
	"NO"
);

-- 스케줄러 숙소 테이블 생성
DROP TABLE "SCHEDULER_ACCOMMODATION" CASCADE CONSTRAINTS;

CREATE TABLE "SCHEDULER_ACCOMMODATION" (
	"NO"	NUMBER		NOT NULL,
	"SCHEDULER_NO"	NUMBER		NOT NULL,
	"CODE"	VARCHAR2(10)		NOT NULL,
	"IMAGE_NO"	NUMBER		NULL,
	"NAME"	VARCHAR2(60)		NOT NULL,
	"START_TIME"	VARCHAR2(50)		NOT NULL,
	"END_TIME"	VARCHAR2(50)		NOT NULL,
	"LOCATION"	VARCHAR2(200)		NOT NULL,
	"STARS"	NUMBER		NULL,
	"COST"	NUMBER		NULL,
	"DETAIL"	VARCHAR2(60)		NULL
);

COMMENT ON COLUMN "SCHEDULER_ACCOMMODATION"."NO" IS '번호';

COMMENT ON COLUMN "SCHEDULER_ACCOMMODATION"."SCHEDULER_NO" IS '스케줄러번호';

COMMENT ON COLUMN "SCHEDULER_ACCOMMODATION"."CODE" IS '종류코드';

COMMENT ON COLUMN "SCHEDULER_ACCOMMODATION"."IMAGE_NO" IS '사진번호';

COMMENT ON COLUMN "SCHEDULER_ACCOMMODATION"."NAME" IS '숙소명';

COMMENT ON COLUMN "SCHEDULER_ACCOMMODATION"."START_TIME" IS '숙박일(시작)';

COMMENT ON COLUMN "SCHEDULER_ACCOMMODATION"."END_TIME" IS '숙박일(종료)';

COMMENT ON COLUMN "SCHEDULER_ACCOMMODATION"."LOCATION" IS '위치';

COMMENT ON COLUMN "SCHEDULER_ACCOMMODATION"."STARS" IS '별점';

COMMENT ON COLUMN "SCHEDULER_ACCOMMODATION"."COST" IS '비용';

COMMENT ON COLUMN "SCHEDULER_ACCOMMODATION"."DETAIL" IS '세부내용';

ALTER TABLE "SCHEDULER_ACCOMMODATION" ADD CONSTRAINT "PK_SCHEDULER_ACCOMMODATION" PRIMARY KEY (
	"NO"
);

ALTER TABLE "SCHEDULER_ACCOMMODATION" ADD CONSTRAINT "FK_SC_TO_SCACCOM.SCHEDULER_NO" FOREIGN KEY (
	"SCHEDULER_NO"
)
REFERENCES "SCHEDULER" (
	"NO"
);

ALTER TABLE "SCHEDULER_ACCOMMODATION" ADD CONSTRAINT "FK_SCCOMPO_TO_SCACCOM.CODE" FOREIGN KEY (
	"CODE"
)
REFERENCES "SCHEDULER_COMPONENT" (
	"CODE"
);

ALTER TABLE "SCHEDULER_ACCOMMODATION" ADD CONSTRAINT "FK_SCIMAGE_TO_SCACCOM.IMAGE_NO" FOREIGN KEY (
	"IMAGE_NO"
)
REFERENCES "SCHEDULER_IMAGE" (
	"NO"
);

-- 한국관광공사 API 관련테이블
DROP TABLE "API_LOCATION_CODE" CASCADE CONSTRAINTS;

CREATE TABLE "API_LOCATION_CODE" (
	"CODE"	VARCHAR(255)		NOT NULL,
	"NAME"	VARCHAR(255)		NOT NULL
);

COMMENT ON COLUMN "API_LOCATION_CODE"."CODE" IS '코드';

COMMENT ON COLUMN "API_LOCATION_CODE"."NAME" IS '지역명';

ALTER TABLE "API_LOCATION_CODE" ADD CONSTRAINT "PK_API_LOCATION_CODE" PRIMARY KEY (
	"CODE"
);




