<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.kh.onthetrain.accommodation.model.mapper.AccommodationMapper">

  <resultMap type="com.kh.onthetrain.accommodation.model.vo.Accommodation" id="accommodationResultMap">
    <id property="no" column="NO" />
    <result property="price" column="PRICE" />
    <result property="name" column="NAME" />
    <result property="status" column="STATUS" />
    <result property="maxValue" column="MAXVALUE" />
    <result property="explain" column="EXPLAIN" />
    <result property="location" column="LOCATION" />
  </resultMap>
  
  <resultMap type="com.kh.onthetrain.accommodation.model.vo.Review" id="reviewsResultMap">
	  <id property="no" column="NO" />
	    <result property="memberNo" column="MEMBER_NO" />
	    <result property="accommodationNo" column="ACCOMMODATION_NO" />
	    <result property="content" column="CONTENT" />
	    <result property="starPoint" column="STARPOINT" />
	    <result property="createDate" column="CREATE_DATE" />
	    <result property="modifyDate" column="MODIFY_DATE" />
  </resultMap>
  
	<select id="findProductByNo" parameterType="String" resultMap="accommodationResultMap">
		  SELECT  NO,
		          PRICE,
		          NAME,
		          STATUS,
		          MAXVALUE,
		          EXPLAIN,
		          LOCATION
		  FROM ACCOMMODATION 
		  WHERE STATUS = 'Y' AND NO = #{no}
	</select>

	<select id="getReviewsByNo" parameterType="String" resultMap="reviewsResultMap">
		 SELECT  NO,
		         MEMBER_NO,
		         ACCOMMODATION_NO,
		         CONTENT,
		         STARPOINT,
		         CREATE_DATE,
		         MODIFY_DATE
		FROM REVIEW 
		WHERE ACCOMMODATION_NO = #{no}
	</select>
</mapper>
