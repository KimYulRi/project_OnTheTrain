<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.kh.onthetrain.member.model.mapper.MemberMapper">
	<sql id="selectMemberSql">
	      SELECT NO,
	      		 NICKNAME,
	             ID,
	             PASSWORD,
	             ROLE,
	             NAME,
	             BIRTH,
	             EMAIL,
	             PHONE,
	             ADDRESS,
	             SNS_TYPE,
	             ENROLL_DATE,
	             STATUS,
	             AMOUNT
	      FROM MEMBER
	   </sql>
	
	 <resultMap id="memberResultMap" type="Member">
      <id property="no" column="NO"/>
      <result property="membership" column="MEMBERSHIP_CODE" />
      <result property="id" column="ID" />
      <result property="password" column="PASSWORD" />
      <result property="role" column="ROLE" />
      <result property="nickname" column="NICKNAME" />
      <result property="name" column="NAME" />
      <result property="birth" column="BIRTH" />
      <result property="email" column="EMAIL" />
      <result property="phone" column="PHONE" />
      <result property="address" column="ADDRESS" />
      <result property="enrollDate" column="ENROLL_DATE" />
      <result property="modifyDate" column="MODIFY_DATE" />
      <result property="snsLogin" column="SNS_LOGIN" />
      <result property="status" column="STATUS" />
      <result property="amount" column="AMOUNT" />
      <result property="loginType" column="CODE" />
      <result property="snsId" column="SNS_ID" />
   </resultMap>
	
	<select id="selectMemberById" parameterType="string" resultMap="memberResultMap">
		SELECT NO,
			   MEMBERSHIP_CODE,
			   ID,
			   PASSWORD,
			   ROLE,
			   NICKNAME,
			   NAME,
			   BIRTH,
			   EMAIL,
			   PHONE,
			   ADDRESS,
			   ENROLL_DATE,
			   MODIFY_DATE,
			   SNS_LOGIN,
			   STATUS,
			   AMOUNT
    	FROM MEMBER
   		WHERE ID = #{id} AND STATUS = 'Y'
	</select>
	
	
	 <select id="selectSnsMemberById" parameterType="string" resultMap="memberResultMap">
		SELECT M.NO,
		       M.MEMBERSHIP_CODE,
		       M.ID,
		       M.PASSWORD,
		       M.ROLE,
		       M.NICKNAME,
		       M.NAME,
		       M.BIRTH,
		       M.EMAIL,
		       M.PHONE,
		       M.ADDRESS,
		       M.ENROLL_DATE,
		       M.MODIFY_DATE,
		       M.SNS_LOGIN,
		       M.STATUS,
		       M.AMOUNT,
		       S.CODE,
		       S.SNS_ID
		FROM MEMBER M
		JOIN SNS_MEMBER S ON (M.NO = S.MEMBER_NO)
		WHERE SNS_ID = #{id} AND STATUS = 'Y'
      </select>
	
	
	<select id="selectCount" resultType="_int">
		SELECT COUNT(*) FROM MEMBER
	</select>
	
	

</mapper>
